app:
  build:
    image: myapp
    dockerfile: CodeshipDockerfile
  links:
    - postgres
  environment:
    DATABASE_URL: postgres://rust_blog@postgres/rust_blog
  volumes:
    - .:/app
postgres:
  image: postgres:9.6.2-alpine
  ports:
    # We'll bind our host's port 5432 to postgres's port 5432, so we can use
    # our database IDEs with it:
    - 5432:5432
  environment:
    POSTGRES_USER: rust_blog
    POSTGRES_DB: rust_blog
deploy:
    image: codeship/heroku-deployment
    encrypted_env_file: deployment.env.encrypted
    volumes:
      - ./:/deploy
